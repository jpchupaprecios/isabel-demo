{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import ProductGrid from'../components/ProductGrid';import{mockAPI}from'../services/mockAPI';import'./CategoryPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryPage=_ref=>{let{categories}=_ref;const{categoryId}=useParams();const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[sortBy,setSortBy]=useState('name');const category=categories.find(cat=>cat.id===categoryId);useEffect(()=>{const fetchCategoryProducts=async()=>{setLoading(true);try{const categoryProducts=await mockAPI.getProductsByCategory(categoryId);setProducts(categoryProducts);}catch(error){console.error('Error fetching category products:',error);}finally{setLoading(false);}};if(categoryId){fetchCategoryProducts();}},[categoryId]);const sortedProducts=[...products].sort((a,b)=>{switch(sortBy){case'price-low':return a.price-b.price;case'price-high':return b.price-a.price;case'rating':return b.rating-a.rating;case'name':default:return a.name.localeCompare(b.name);}});if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cargando productos de \",(category===null||category===void 0?void 0:category.name)||'la categoría',\"...\"]})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"category-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"category-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:(category===null||category===void 0?void 0:category.name)||'Categoría'}),/*#__PURE__*/_jsxs(\"p\",{children:[products.length,\" productos encontrados\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"category-controls\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sort-controls\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sort-select\",children:\"Ordenar por:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"sort-select\",value:sortBy,onChange:e=>setSortBy(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"name\",children:\"Nombre A-Z\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price-low\",children:\"Precio: Menor a Mayor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price-high\",children:\"Precio: Mayor a Menor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rating\",children:\"Mejor Valorados\"})]})]})}),/*#__PURE__*/_jsx(ProductGrid,{products:sortedProducts})]})})});};export default CategoryPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","ProductGrid","mockAPI","jsx","_jsx","jsxs","_jsxs","CategoryPage","_ref","categories","categoryId","products","setProducts","loading","setLoading","sortBy","setSortBy","category","find","cat","id","fetchCategoryProducts","categoryProducts","getProductsByCategory","error","console","sortedProducts","sort","a","b","price","rating","name","localeCompare","className","children","length","htmlFor","value","onChange","e","target"],"sources":["/home/jotapey/isabel/src/pages/CategoryPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport ProductGrid from '../components/ProductGrid';\nimport { mockAPI } from '../services/mockAPI';\nimport './CategoryPage.css';\n\nconst CategoryPage = ({ categories }) => {\n  const { categoryId } = useParams();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [sortBy, setSortBy] = useState('name');\n\n  const category = categories.find(cat => cat.id === categoryId);\n\n  useEffect(() => {\n    const fetchCategoryProducts = async () => {\n      setLoading(true);\n      try {\n        const categoryProducts = await mockAPI.getProductsByCategory(categoryId);\n        setProducts(categoryProducts);\n      } catch (error) {\n        console.error('Error fetching category products:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (categoryId) {\n      fetchCategoryProducts();\n    }\n  }, [categoryId]);\n\n  const sortedProducts = [...products].sort((a, b) => {\n    switch (sortBy) {\n      case 'price-low':\n        return a.price - b.price;\n      case 'price-high':\n        return b.price - a.price;\n      case 'rating':\n        return b.rating - a.rating;\n      case 'name':\n      default:\n        return a.name.localeCompare(b.name);\n    }\n  });\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n        <p>Cargando productos de {category?.name || 'la categoría'}...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"category-page\">\n      <div className=\"page-container\">\n        <div className=\"container\">\n          <div className=\"category-header\">\n            <h1>{category?.name || 'Categoría'}</h1>\n            <p>{products.length} productos encontrados</p>\n          </div>\n\n          <div className=\"category-controls\">\n            <div className=\"sort-controls\">\n              <label htmlFor=\"sort-select\">Ordenar por:</label>\n              <select \n                id=\"sort-select\"\n                value={sortBy} \n                onChange={(e) => setSortBy(e.target.value)}\n              >\n                <option value=\"name\">Nombre A-Z</option>\n                <option value=\"price-low\">Precio: Menor a Mayor</option>\n                <option value=\"price-high\">Precio: Mayor a Menor</option>\n                <option value=\"rating\">Mejor Valorados</option>\n              </select>\n            </div>\n          </div>\n\n          <ProductGrid products={sortedProducts} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}